{"version":3,"sources":["webpack:///webpack/universalModuleDefinition","webpack:///webpack/bootstrap 79fae98e180af7793ff9","webpack:///./src/helpers/index.js","webpack:///./src/helpers/ObjectHelper.js","webpack:///./src/core/utils/utils.js","webpack:///./src/helpers/jQueryHelper.js","webpack:///./src/helpers/VueRouter.js"],"names":["StateHelper","object","jQuery","vueRouter","setup","ObjectHelper","fsm","data","on","onChange","bind","onPause","onModify","reset","update","prototype","name","index","paused","is","actions","states","all","event","isPaused","transitions","getStates","getActions","state","indexOf","getStatesFrom","getActionsFrom","isObject","isArray","isString","isFunction","isDefined","isUndefined","trim","diff","toHash","value","Object","toString","call","Array","Function","String","replace","a","b","da","filter","v","db","concat","values","reduce","obj","jQueryHelper","controls","control","selectors","elements","$","do","target","onModifyStates","onModifyActions","updateStates","updateButtons","attr","find","removeClass","addClass","each","i","e","disabled","canDo","toggleClass","router","updateRoute","push","afterEach","route"],"mappings":"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","file":"StateHelper.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"StateHelper\"] = factory();\n\telse\n\t\troot[\"StateHelper\"] = factory();\n})(this, function() {\nreturn \n\n\n/** WEBPACK FOOTER **\n ** webpack/universalModuleDefinition\n **/"," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId])\n \t\t\treturn installedModules[moduleId].exports;\n\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\texports: {},\n \t\t\tid: moduleId,\n \t\t\tloaded: false\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.loaded = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(0);\n\n\n\n/** WEBPACK FOOTER **\n ** webpack/bootstrap 79fae98e180af7793ff9\n **/","import object from './ObjectHelper';\nimport jQuery from'./jQueryHelper';\nimport vueRouter from'./VueRouter';\n\nvar StateHelper =\n{\n    object,\n    jQuery,\n    vueRouter\n};\n\nexport default StateHelper;\n\n\n\n/** WEBPACK FOOTER **\n ** ./~/eslint-loader!./src/helpers/index.js\n **/","import { toHash } from '../core/utils/utils';\n\nfunction ObjectHelper (fsm)\n{\n    this.data = {};\n    this.fsm = fsm;\n    this.fsm\n        .on('change', this.onChange.bind(this))\n        .on('(pause resume cancel)', this.onPause.bind(this))\n        .on('(state:add state:remove action:add action:remove)', this.onModify.bind(this));\n    this.reset();\n    this.update();\n}\n\nObjectHelper.prototype =\n{\n    fsm : null,\n\n    data : null,\n\n    update:function()\n    {\n        this.onChange();\n        this.onPause();\n        this.onModify();\n    },\n\n    reset: function ()\n    {\n        this.data =\n        {\n            name     : '',\n            index    : -1,\n            paused   : false,\n            is       : {},\n            actions  : {},\n            states   : {},\n            all:{\n                states  :[],\n                actions :[]\n            }\n        }\n    },\n\n    onPause:function(event)\n    {\n        this.data.paused        = this.fsm.isPaused();\n    },\n\n    onModify:function(event)\n    {\n        this.data.all.states    = this.fsm.transitions.getStates();\n        this.data.all.actions   = this.fsm.transitions.getActions();\n    },\n\n    onChange:function(event)\n    {\n        var fsm                 = this.fsm;\n        this.data.name          = fsm.state;\n        this.data.index         = this.fsm.transitions.states.indexOf(this.data.name);\n        this.data.states        = toHash(fsm.transitions.getStatesFrom(fsm.state) || []);\n        this.data.actions       = toHash(fsm.transitions.getActionsFrom(fsm.state) || []);\n        this.data.is            = {};\n        this.data.is[fsm.state] = true;\n    }\n\n};\n\nexport default function setup (fsm)\n{\n    return new ObjectHelper(fsm);\n}\n\n\n\n/** WEBPACK FOOTER **\n ** ./~/eslint-loader!./src/helpers/ObjectHelper.js\n **/","export function isObject (value)\n{\n    return Object.prototype.toString.call(value) === '[object Object]';\n}\n\nexport function isArray (value)\n{\n    return value instanceof Array;\n}\n\nexport function isString (value)\n{\n    return typeof value === 'string';\n}\n\nexport function isFunction(value)\n{\n    return value instanceof Function;\n}\n\nexport function isDefined (value)\n{\n    return typeof value !== 'undefined';\n}\n\nexport function isUndefined (value)\n{\n    return typeof value === 'undefined';\n}\n\nexport function trim (value)\n{\n    return String(value || '').replace(/^\\s+|\\s+$/g, '');\n}\n\nexport function diff (a, b)\n{\n    var da = b.filter( v => a.indexOf(v) < 0 );\n    var db = a.filter( v => b.indexOf(v) < 0 );\n    return db.concat(da)\n}\n\nexport function toHash(values) {\n    return values.reduce(function (obj, value) {\n        obj[value] = true;\n        return obj;\n    }, {})\n}\n\n\n\n/** WEBPACK FOOTER **\n ** ./~/eslint-loader!./src/core/utils/utils.js\n **/","function jQueryHelper (fsm, states, controls, state, control)\n{\n    // fsm\n    this.fsm = fsm;\n\n    // selectors\n    this.selectors =\n    {\n        state    : state || '[id]',\n        control  : control || '[name]'\n    };\n\n    // elements\n    this.elements =\n    {\n        states      : $(states || '#states'),\n        controls    : $(controls || '#controls')\n    };\n\n    // live-bind button clicks to fsm actions\n    this.elements.controls.on('click', this.selectors.control, event => {\n        this.fsm.do(event.target.name);\n    });\n\n    // bind event handlers\n    this.fsm\n        .on('change', this.onChange.bind(this))\n        .on('(pause resume cancel)',  this.onPause.bind(this))\n        .on('(state:add state:remove)',  this.onModifyStates.bind(this))\n        .on('(action:add action:remove)',  this.onModifyActions.bind(this));\n\n    // update\n    this.update();\n}\n\njQueryHelper.prototype =\n{\n    fsm : null,\n\n    elements : null,\n\n    selectors : null,\n\n    update ()\n    {\n        this.updateStates();\n        this.updateButtons();\n    },\n\n    updateStates ()\n    {\n        var state = this.fsm.state;\n        if(state)\n        {\n            // assign state\n            this.elements.states\n                .attr('data-state', state);\n\n            // assign active class to the current state\n            this.elements.states\n                .find(this.selectors.state)\n                .removeClass('active')\n                .filter('#'  + state)\n                .addClass('active');\n        }\n    },\n\n    updateButtons ()\n    {\n        var paused = this.fsm.isPaused();\n        this.elements.controls\n            .find(this.selectors.control)\n            .each( (i, e) => {\n                e.disabled = ! this.fsm.canDo(e.name) || paused;\n            });\n    },\n\n    onChange (event)\n    {\n        this.updateStates();\n        this.updateButtons();\n    },\n\n    onPause (event)\n    {\n        // assign paused\n        this.elements.states\n            .toggleClass('paused', this.fsm.isPaused());\n\n        // update buttons\n        this.updateButtons();\n    },\n\n    onModifyStates (event)\n    {\n        this.updateStates();\n    },\n\n    onModifyActions (event)\n    {\n        this.updateButtons();\n    }\n\n};\n\nexport default function setup (fsm, states, controls, state, control)\n{\n    return new jQueryHelper(fsm, states, controls, state, control);\n}\n\n\n\n/** WEBPACK FOOTER **\n ** ./~/eslint-loader!./src/helpers/jQueryHelper.js\n **/","/**\n * Setup relationship between VueRouter and StateHelper\n *\n * @param   {VueRouter}     router      The VueRouter instance\n * @param   {StateObject}   object      The StateObject instance\n */\nexport default function setup (router, object)\n{\n    function updateRoute()\n    {\n        router.push('/' + object.fsm.state);\n    }\n\n    // update route when state updates\n    object.fsm.on('change', updateRoute);\n\n    // update state when route updates\n    router.afterEach(function(route)\n    {\n        // directly set state so state machine event handlers are not triggered\n        object.fsm.state = route.name;\n\n        // manually update helper\n        object.update();\n    });\n\n    // immediately update route\n    updateRoute();\n}\n\n\n\n/** WEBPACK FOOTER **\n ** ./~/eslint-loader!./src/helpers/VueRouter.js\n **/"],"sourceRoot":""}