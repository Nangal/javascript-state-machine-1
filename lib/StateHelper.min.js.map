{"version":3,"sources":["webpack:///webpack/universalModuleDefinition","webpack:///StateHelper.min.js","webpack:///webpack/bootstrap 78f0aec4264f3a0fa36c","webpack:///./src/helpers/index.js","webpack:///./src/helpers/ObjectHelper.js","webpack:///./src/core/utils/utils.js","webpack:///./src/helpers/jQueryHelper.js","webpack:///./src/helpers/VueRouter.js"],"names":["root","factory","exports","module","define","amd","this","modules","__webpack_require__","moduleId","installedModules","id","loaded","call","m","c","p","_interopRequireDefault","obj","__esModule","default","Object","defineProperty","value","_ObjectHelper","_ObjectHelper2","_jQueryHelper","_jQueryHelper2","_VueRouter","_VueRouter2","StateHelper","object","jQuery","vueRouter","ObjectHelper","fsm","data","on","onChange","bind","onPause","onModify","reset","update","setup","_utils","prototype","name","index","paused","is","actions","states","all","event","isPaused","transitions","getStates","getActions","state","indexOf","toHash","getStatesFrom","getActionsFrom","isObject","toString","isArray","Array","isString","isFunction","Function","isDefined","isUndefined","trim","String","replace","diff","a","b","da","filter","v","db","concat","values","reduce","jQueryHelper","controls","control","_this","selectors","elements","$","target","onModifyStates","onModifyActions","updateStates","updateButtons","attr","find","removeClass","addClass","_this2","each","i","e","disabled","canDo","toggleClass","router","updateRoute","push","afterEach","route"],"mappings":"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","file":"StateHelper.min.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"StateHelper\"] = factory();\n\telse\n\t\troot[\"StateHelper\"] = factory();\n})(this, function() {\nreturn \n\n\n/** WEBPACK FOOTER **\n ** webpack/universalModuleDefinition\n **/","(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"StateHelper\"] = factory();\n\telse\n\t\troot[\"StateHelper\"] = factory();\n})(this, function() {\nreturn /******/ (function(modules) { // webpackBootstrap\n/******/ \t// The module cache\n/******/ \tvar installedModules = {};\n/******/\n/******/ \t// The require function\n/******/ \tfunction __webpack_require__(moduleId) {\n/******/\n/******/ \t\t// Check if module is in cache\n/******/ \t\tif(installedModules[moduleId])\n/******/ \t\t\treturn installedModules[moduleId].exports;\n/******/\n/******/ \t\t// Create a new module (and put it into the cache)\n/******/ \t\tvar module = installedModules[moduleId] = {\n/******/ \t\t\texports: {},\n/******/ \t\t\tid: moduleId,\n/******/ \t\t\tloaded: false\n/******/ \t\t};\n/******/\n/******/ \t\t// Execute the module function\n/******/ \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n/******/\n/******/ \t\t// Flag the module as loaded\n/******/ \t\tmodule.loaded = true;\n/******/\n/******/ \t\t// Return the exports of the module\n/******/ \t\treturn module.exports;\n/******/ \t}\n/******/\n/******/\n/******/ \t// expose the modules object (__webpack_modules__)\n/******/ \t__webpack_require__.m = modules;\n/******/\n/******/ \t// expose the module cache\n/******/ \t__webpack_require__.c = installedModules;\n/******/\n/******/ \t// __webpack_public_path__\n/******/ \t__webpack_require__.p = \"\";\n/******/\n/******/ \t// Load entry module and return exports\n/******/ \treturn __webpack_require__(0);\n/******/ })\n/************************************************************************/\n/******/ ([\n/* 0 */\n/***/ function(module, exports, __webpack_require__) {\n\n\tmodule.exports = __webpack_require__(1);\n\n\n/***/ },\n/* 1 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t    value: true\n\t});\n\t\n\tvar _ObjectHelper = __webpack_require__(2);\n\t\n\tvar _ObjectHelper2 = _interopRequireDefault(_ObjectHelper);\n\t\n\tvar _jQueryHelper = __webpack_require__(4);\n\t\n\tvar _jQueryHelper2 = _interopRequireDefault(_jQueryHelper);\n\t\n\tvar _VueRouter = __webpack_require__(5);\n\t\n\tvar _VueRouter2 = _interopRequireDefault(_VueRouter);\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\t\n\tvar StateHelper = {\n\t    object: _ObjectHelper2.default,\n\t    jQuery: _jQueryHelper2.default,\n\t    vueRouter: _VueRouter2.default\n\t};\n\t\n\texports.default = StateHelper;\n\n/***/ },\n/* 2 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t    value: true\n\t});\n\texports.default = setup;\n\t\n\tvar _utils = __webpack_require__(3);\n\t\n\tfunction ObjectHelper(fsm) {\n\t    this.data = {};\n\t    this.fsm = fsm;\n\t    this.fsm.on('change', this.onChange.bind(this)).on('(pause resume cancel)', this.onPause.bind(this)).on('(state.add state.remove action.add action.remove)', this.onModify.bind(this));\n\t    this.reset();\n\t    this.update();\n\t}\n\t\n\tObjectHelper.prototype = {\n\t    fsm: null,\n\t\n\t    data: null,\n\t\n\t    update: function update() {\n\t        this.onChange();\n\t        this.onPause();\n\t        this.onModify();\n\t    },\n\t\n\t    reset: function reset() {\n\t        this.data = {\n\t            name: '',\n\t            index: -1,\n\t            paused: false,\n\t            is: {},\n\t            actions: {},\n\t            states: {},\n\t            all: {\n\t                states: [],\n\t                actions: []\n\t            }\n\t        };\n\t    },\n\t\n\t    onPause: function onPause(event) {\n\t        this.data.paused = this.fsm.isPaused();\n\t    },\n\t\n\t    onModify: function onModify(event) {\n\t        this.data.all.states = this.fsm.transitions.getStates();\n\t        this.data.all.actions = this.fsm.transitions.getActions();\n\t    },\n\t\n\t    onChange: function onChange(event) {\n\t        var fsm = this.fsm;\n\t        this.data.name = fsm.state;\n\t        this.data.index = this.fsm.transitions.states.indexOf(this.data.name);\n\t        this.data.states = (0, _utils.toHash)(fsm.transitions.getStatesFrom(fsm.state) || []);\n\t        this.data.actions = (0, _utils.toHash)(fsm.transitions.getActionsFrom(fsm.state) || []);\n\t        this.data.is = {};\n\t        this.data.is[fsm.state] = true;\n\t    }\n\t\n\t};\n\t\n\tfunction setup(fsm) {\n\t    return new ObjectHelper(fsm);\n\t}\n\n/***/ },\n/* 3 */\n/***/ function(module, exports) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t    value: true\n\t});\n\texports.isObject = isObject;\n\texports.isArray = isArray;\n\texports.isString = isString;\n\texports.isFunction = isFunction;\n\texports.isDefined = isDefined;\n\texports.isUndefined = isUndefined;\n\texports.trim = trim;\n\texports.diff = diff;\n\texports.toHash = toHash;\n\tfunction isObject(value) {\n\t    return Object.prototype.toString.call(value) === '[object Object]';\n\t}\n\t\n\tfunction isArray(value) {\n\t    return value instanceof Array;\n\t}\n\t\n\tfunction isString(value) {\n\t    return typeof value === 'string';\n\t}\n\t\n\tfunction isFunction(value) {\n\t    return value instanceof Function;\n\t}\n\t\n\tfunction isDefined(value) {\n\t    return typeof value !== 'undefined';\n\t}\n\t\n\tfunction isUndefined(value) {\n\t    return typeof value === 'undefined';\n\t}\n\t\n\tfunction trim(value) {\n\t    return String(value || '').replace(/^\\s+|\\s+$/g, '');\n\t}\n\t\n\tfunction diff(a, b) {\n\t    var da = b.filter(function (v) {\n\t        return a.indexOf(v) < 0;\n\t    });\n\t    var db = a.filter(function (v) {\n\t        return b.indexOf(v) < 0;\n\t    });\n\t    return db.concat(da);\n\t}\n\t\n\tfunction toHash(values) {\n\t    return values.reduce(function (obj, value) {\n\t        obj[value] = true;\n\t        return obj;\n\t    }, {});\n\t}\n\n/***/ },\n/* 4 */\n/***/ function(module, exports) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t    value: true\n\t});\n\texports.default = setup;\n\tfunction jQueryHelper(fsm, states, controls, state, control) {\n\t    var _this = this;\n\t\n\t    // fsm\n\t    this.fsm = fsm;\n\t\n\t    // selectors\n\t    this.selectors = {\n\t        state: state || '[id]',\n\t        control: control || '[name]'\n\t    };\n\t\n\t    // elements\n\t    this.elements = {\n\t        states: $(states || '#states'),\n\t        controls: $(controls || '#controls')\n\t    };\n\t\n\t    // live-bind button clicks to fsm actions\n\t    this.elements.controls.on('click', this.selectors.control, function (event) {\n\t        _this.fsm.do(event.target.name);\n\t    });\n\t\n\t    // bind event handlers\n\t    this.fsm.on('change', this.onChange.bind(this)).on('(pause resume cancel)', this.onPause.bind(this)).on('(state.add state.remove)', this.onModifyStates.bind(this)).on('(action.add action.remove)', this.onModifyActions.bind(this));\n\t\n\t    // update\n\t    this.update();\n\t}\n\t\n\tjQueryHelper.prototype = {\n\t    fsm: null,\n\t\n\t    elements: null,\n\t\n\t    selectors: null,\n\t\n\t    update: function update() {\n\t        this.updateStates();\n\t        this.updateButtons();\n\t    },\n\t    updateStates: function updateStates() {\n\t        var state = this.fsm.state;\n\t        if (state) {\n\t            // assign state\n\t            this.elements.states.attr('data-state', state);\n\t\n\t            // assign active class to the current state\n\t            this.elements.states.find(this.selectors.state).removeClass('active').filter('#' + state).addClass('active');\n\t        }\n\t    },\n\t    updateButtons: function updateButtons() {\n\t        var _this2 = this;\n\t\n\t        var paused = this.fsm.isPaused();\n\t        this.elements.controls.find(this.selectors.control).each(function (i, e) {\n\t            e.disabled = !_this2.fsm.canDo(e.name) || paused;\n\t        });\n\t    },\n\t    onChange: function onChange(event) {\n\t        this.updateStates();\n\t        this.updateButtons();\n\t    },\n\t    onPause: function onPause(event) {\n\t        // assign paused\n\t        this.elements.states.toggleClass('paused', this.fsm.isPaused());\n\t\n\t        // update buttons\n\t        this.updateButtons();\n\t    },\n\t    onModifyStates: function onModifyStates(event) {\n\t        this.updateStates();\n\t    },\n\t    onModifyActions: function onModifyActions(event) {\n\t        this.updateButtons();\n\t    }\n\t};\n\t\n\tfunction setup(fsm, states, controls, state, control) {\n\t    return new jQueryHelper(fsm, states, controls, state, control);\n\t}\n\n/***/ },\n/* 5 */\n/***/ function(module, exports) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t    value: true\n\t});\n\texports.default = setup;\n\t/**\n\t * Setup relationship between VueRouter and StateHelper\n\t *\n\t * @param   {VueRouter}     router      The VueRouter instance\n\t * @param   {StateObject}   object      The StateObject instance\n\t */\n\tfunction setup(router, object) {\n\t    function updateRoute() {\n\t        router.push('/' + object.fsm.state);\n\t    }\n\t\n\t    // update route when state updates\n\t    object.fsm.on('change', updateRoute);\n\t\n\t    // update state when route updates\n\t    router.afterEach(function (route) {\n\t        // directly set state so state machine event handlers are not triggered\n\t        object.fsm.state = route.name;\n\t\n\t        // manually update helper\n\t        object.update();\n\t    });\n\t\n\t    // immediately update route\n\t    updateRoute();\n\t}\n\n/***/ }\n/******/ ])\n});\n;\n\n\n/** WEBPACK FOOTER **\n ** StateHelper.min.js\n **/"," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId])\n \t\t\treturn installedModules[moduleId].exports;\n\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\texports: {},\n \t\t\tid: moduleId,\n \t\t\tloaded: false\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.loaded = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(0);\n\n\n\n/** WEBPACK FOOTER **\n ** webpack/bootstrap 78f0aec4264f3a0fa36c\n **/","import object from './ObjectHelper';\nimport jQuery from'./jQueryHelper';\nimport vueRouter from'./VueRouter';\n\nvar StateHelper =\n{\n    object,\n    jQuery,\n    vueRouter\n};\n\nexport default StateHelper;\n\n\n\n/** WEBPACK FOOTER **\n ** ./~/eslint-loader!./src/helpers/index.js\n **/","import { toHash } from '../core/utils/utils';\n\nfunction ObjectHelper (fsm)\n{\n    this.data = {};\n    this.fsm = fsm;\n    this.fsm\n        .on('change', this.onChange.bind(this))\n        .on('(pause resume cancel)', this.onPause.bind(this))\n        .on('(state.add state.remove action.add action.remove)', this.onModify.bind(this));\n    this.reset();\n    this.update();\n}\n\nObjectHelper.prototype =\n{\n    fsm : null,\n\n    data : null,\n\n    update:function()\n    {\n        this.onChange();\n        this.onPause();\n        this.onModify();\n    },\n\n    reset: function ()\n    {\n        this.data =\n        {\n            name     : '',\n            index    : -1,\n            paused   : false,\n            is       : {},\n            actions  : {},\n            states   : {},\n            all:{\n                states  :[],\n                actions :[]\n            }\n        }\n    },\n\n    onPause:function(event)\n    {\n        this.data.paused        = this.fsm.isPaused();\n    },\n\n    onModify:function(event)\n    {\n        this.data.all.states    = this.fsm.transitions.getStates();\n        this.data.all.actions   = this.fsm.transitions.getActions();\n    },\n\n    onChange:function(event)\n    {\n        var fsm                 = this.fsm;\n        this.data.name          = fsm.state;\n        this.data.index         = this.fsm.transitions.states.indexOf(this.data.name);\n        this.data.states        = toHash(fsm.transitions.getStatesFrom(fsm.state) || []);\n        this.data.actions       = toHash(fsm.transitions.getActionsFrom(fsm.state) || []);\n        this.data.is            = {};\n        this.data.is[fsm.state] = true;\n    }\n\n};\n\nexport default function setup (fsm)\n{\n    return new ObjectHelper(fsm);\n}\n\n\n\n/** WEBPACK FOOTER **\n ** ./~/eslint-loader!./src/helpers/ObjectHelper.js\n **/","export function isObject (value)\n{\n    return Object.prototype.toString.call(value) === '[object Object]';\n}\n\nexport function isArray (value)\n{\n    return value instanceof Array;\n}\n\nexport function isString (value)\n{\n    return typeof value === 'string';\n}\n\nexport function isFunction(value)\n{\n    return value instanceof Function;\n}\n\nexport function isDefined (value)\n{\n    return typeof value !== 'undefined';\n}\n\nexport function isUndefined (value)\n{\n    return typeof value === 'undefined';\n}\n\nexport function trim (value)\n{\n    return String(value || '').replace(/^\\s+|\\s+$/g, '');\n}\n\nexport function diff (a, b)\n{\n    var da = b.filter( v => a.indexOf(v) < 0 );\n    var db = a.filter( v => b.indexOf(v) < 0 );\n    return db.concat(da)\n}\n\nexport function toHash(values) {\n    return values.reduce(function (obj, value) {\n        obj[value] = true;\n        return obj;\n    }, {})\n}\n\n\n\n/** WEBPACK FOOTER **\n ** ./~/eslint-loader!./src/core/utils/utils.js\n **/","function jQueryHelper (fsm, states, controls, state, control)\n{\n    // fsm\n    this.fsm = fsm;\n\n    // selectors\n    this.selectors =\n    {\n        state    : state || '[id]',\n        control  : control || '[name]'\n    };\n\n    // elements\n    this.elements =\n    {\n        states      : $(states || '#states'),\n        controls    : $(controls || '#controls')\n    };\n\n    // live-bind button clicks to fsm actions\n    this.elements.controls.on('click', this.selectors.control, event => {\n        this.fsm.do(event.target.name);\n    });\n\n    // bind event handlers\n    this.fsm\n        .on('change', this.onChange.bind(this))\n        .on('(pause resume cancel)',  this.onPause.bind(this))\n        .on('(state.add state.remove)',  this.onModifyStates.bind(this))\n        .on('(action.add action.remove)',  this.onModifyActions.bind(this));\n\n    // update\n    this.update();\n}\n\njQueryHelper.prototype =\n{\n    fsm : null,\n\n    elements : null,\n\n    selectors : null,\n\n    update ()\n    {\n        this.updateStates();\n        this.updateButtons();\n    },\n\n    updateStates ()\n    {\n        var state = this.fsm.state;\n        if(state)\n        {\n            // assign state\n            this.elements.states\n                .attr('data-state', state);\n\n            // assign active class to the current state\n            this.elements.states\n                .find(this.selectors.state)\n                .removeClass('active')\n                .filter('#'  + state)\n                .addClass('active');\n        }\n    },\n\n    updateButtons ()\n    {\n        var paused = this.fsm.isPaused();\n        this.elements.controls\n            .find(this.selectors.control)\n            .each( (i, e) => {\n                e.disabled = ! this.fsm.canDo(e.name) || paused;\n            });\n    },\n\n    onChange (event)\n    {\n        this.updateStates();\n        this.updateButtons();\n    },\n\n    onPause (event)\n    {\n        // assign paused\n        this.elements.states\n            .toggleClass('paused', this.fsm.isPaused());\n\n        // update buttons\n        this.updateButtons();\n    },\n\n    onModifyStates (event)\n    {\n        this.updateStates();\n    },\n\n    onModifyActions (event)\n    {\n        this.updateButtons();\n    }\n\n};\n\nexport default function setup (fsm, states, controls, state, control)\n{\n    return new jQueryHelper(fsm, states, controls, state, control);\n}\n\n\n\n/** WEBPACK FOOTER **\n ** ./~/eslint-loader!./src/helpers/jQueryHelper.js\n **/","/**\n * Setup relationship between VueRouter and StateHelper\n *\n * @param   {VueRouter}     router      The VueRouter instance\n * @param   {StateObject}   object      The StateObject instance\n */\nexport default function setup (router, object)\n{\n    function updateRoute()\n    {\n        router.push('/' + object.fsm.state);\n    }\n\n    // update route when state updates\n    object.fsm.on('change', updateRoute);\n\n    // update state when route updates\n    router.afterEach(function(route)\n    {\n        // directly set state so state machine event handlers are not triggered\n        object.fsm.state = route.name;\n\n        // manually update helper\n        object.update();\n    });\n\n    // immediately update route\n    updateRoute();\n}\n\n\n\n/** WEBPACK FOOTER **\n ** ./~/eslint-loader!./src/helpers/VueRouter.js\n **/"],"sourceRoot":""}